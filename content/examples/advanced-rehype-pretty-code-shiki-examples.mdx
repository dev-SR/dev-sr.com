---
title: "Advanced rehype-pretty-code & Shiki Examples"
date: "2025-08-29"
excerpt: "In-depth examples of integrating rehype-pretty-code with advanced Shiki transformers for beautifully styled code blocks in MDX, complete with customization and copy-to-clipboard functionality."
tags: ["rehype-pretty-code", "shiki", "transformers", "mdx", "code"]
---

# Advanced rehype-pretty-code & Shiki Examples

## Inline Code Example

Inline code like `console.log('hello')` remains unaffected by transformers and uses the `code` component for consistent styling.


## TransformerNotationDiff

Marks added (`[!code ++]`) and removed (`[!code --]`) lines to highlight code changes, using the `v3` matching algorithm for intuitive line counting.

```ts
// [!code --]
console.log('hewwo') // [!code --]
console.log('hello') // [!code ++]
console.log('goodbye')
```

**Explanation**: The line with `hewwo` is marked as removed (red background), and the line with `hello` is marked as added (green background). The `has-diff` class is added to the `<pre>` tag.

## LineHighlight

```ts showLineNumbers {1-2}
console.log('Highlighted line 1')
console.log('Highlighted line 2')
console.log('Not highlighted')
```

```js showLineNumbers {1} {3-4}
function helloWorld() {
    // this is a comment
    let greeting = 'Hello World!'
    console.log(greeting)
}
```

```ts
console.log('No errors or warnings')
console.error('Error') // [!code error]
console.warn('Warning') // [!code warning]
````

## WordHighlight

```ts /Hello/
const message = 'Hello World'
console.log(message) // prints Hello World
console.log('Hello again') // not highlighted
```

```js showLineNumbers /helloWorld()/
function helloWorld() {
    // this is a comment
    let greeting = 'Hello World!'
    console.log(greeting)
}
```

Same as for the highlighted lines, you can add an unlimited amount of highlighted character variations by using IDs like so:

```js showLineNumbers /greeting/#mySpecialHighlight
function helloWorld() {
    // this is a comment
    let greeting = 'Hello World!'
    console.log(greeting)
}
```
Lines 194 to 196: we set the background color for highlighted characters when using the mySpecialHighlight ID
If you look at the result in your browser, you will notice that both occurrences of the greeting variable were highlighted.
To only highlight the second one, add the number 2 behind the second slash, like so:

```js showLineNumbers /greeting/2#mySpecialHighlight
function helloWorld() {
    // this is a comment
    let greeting = 'Hello World!'
    console.log(greeting)
}
```

## TransformerNotationFocus

Focuses specific lines using `[!code focus]` or `[!code focus:N]` to draw attention with a distinct visual effect.

```ts
console.log('Not focused')
console.log('Not focused')
console.log('Not focused')
// [!code focus:2]
console.log('Focused line 1')
console.log('Focused line 2')
console.log('Not focused')
console.log('Not focused')
console.log('Not focused')
```

**Explanation**: The first two lines are marked with a blue background (`has-focused` class on `<pre>`), using the `v3` algorithm.

## Multi-File Example with Combined Transformers

<MultiFileCodeBlock
    title="Component with Multiple Transformers"
    files={[
        {
            filename: "Component.tsx",
            language: "tsx",
            content: `import React from 'react';
// [!code --]
console.log('Old code') // [!code --]
console.log('New code') // [!code ++]
// [!code highlight]
console.log('Highlighted') // [!code highlight]
// [!code word:React:1]
`,
        },
        {
            filename: "Component.css",
            language: "css",
            content: `.component {
padding: 1rem; /* [!code word:padding] */
margin: 0.5rem; /* [!code focus] */
}`,
        },
        {
            filename: "Component.test.tsx",
            language: "tsx",
            content: `import { render } from '@testing-library/react';
import Component from './Component';

// [!code error]
render(<Component />) // [!code error]
console.log('Test passed') // [!code warning]
`,
        },
    ]}
/>

**Explanation**: This multi-file example combines `transformerNotationDiff`, `transformerNotationHighlight`, `transformerNotationWordHighlight`, `transformerNotationFocus`, and `transformerNotationErrorLevel` to showcase multiple effects in a single code block set.

These examples demonstrate the full range of Shiki transformers, with consistent styling, copy-to-clipboard functionality, and dual-theme support across single and multi-file code blocks.